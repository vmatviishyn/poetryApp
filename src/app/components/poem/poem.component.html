<div class="poem">

    <div class="poem-wrapper" *ngIf="poem">
      <div class="poem-wrapper-secondary">
        <div class="poem-img">
          <img [src]="poem.poemImage" alt="">
        </div>

        <div class="poem-text">
          <div>{{ poem.poemText }}</div>
        </div>

        <div class="poem-navigation">
          <button *ngIf="user && user.isAdmin" class="poem-menu-btn" mat-icon-button [matMenuTriggerFor]="menu">
            <mat-icon>more_vert</mat-icon>
          </button>

          <mat-menu #menu="matMenu" xPosition="before">
              <button mat-menu-item (click)="onEditPoem(poem)">
                <mat-icon>edit</mat-icon>
                <span>Редагувати</span>
              </button>
              <button mat-menu-item (click)="onDeletePoem(poem)">
                <mat-icon>delete_forever</mat-icon>
                <span>Видалити</span>
              </button>
          </mat-menu>
        </div>
      </div>

      <div>
        <div class="poem-bottom-navigation">
          <button *ngIf="user && user.isAdmin" class="poem-bottom-navigation-menu-btn" mat-icon-button [matMenuTriggerFor]="menu">
            <mat-icon>more_vert</mat-icon>
          </button>

          <mat-menu #menu="matMenu" xPosition="before">
              <button mat-menu-item (click)="onEditPoem(poem)">
                <mat-icon>edit</mat-icon>
                <span>Редагувати</span>
              </button>
              <button mat-menu-item (click)="onDeletePoem(poem)">
                <mat-icon>delete_forever</mat-icon>
                <span>Видалити</span>
              </button>
          </mat-menu>

          <button mat-icon-button (click)="onAddLike(poem, user)">
            <mat-icon [matBadge]="likes?.length" matBadgeColor="warn" [matBadgeHidden]="likes?.length == 0">
              {{ isPoemLiked ? 'favorite' : 'favorite_border' }}
            </mat-icon>
          </button>

          <button mat-icon-button>
            <mat-icon matBadge="15" matBadgeColor="warn">insert_comment</mat-icon>
          </button>
        </div>

        <div class="poem-info">
          <div class="poem-info-likes">
            Liked by
            <button mat-icon-button [matTooltip]="like?.userName" matTooltipPosition="above" *ngFor="let like of likes">
              <img class="user-liked" [src]="like?.userPhoto">
            </button>
          </div>
          <div class="poem-info-comments">

            <div *ngFor="let comment of comments">
              <span>{{comment.userName}}</span>
              <span>{{comment.commentText}}</span>
            </div>



            <img class="user-liked" [src]="user?.photoURL">

            <mat-form-field class="example-full-width">
              <mat-label>Leave a comment</mat-label>
              <textarea
                [(ngModel)]="comment"
                matInput
                placeholder="Ex. It makes me feel..."
                matTextareaAutosize
                matAutosizeMinRows="1"
                matAutosizeMaxRows="5">
              </textarea>
            </mat-form-field>

            <button mat-icon-button (click)="onAddComment(poem, user)">
              <mat-icon>send</mat-icon>
            </button>
          </div>
        </div>

      </div>
    </div>

</div>
